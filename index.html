<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>mmories.com</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase App and Auth SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js"></script>

    <script>
        // Your Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyBztUoMtgYAGCRwjYFcqYZeRU5lsLOWBSs",
            authDomain: "mmories-5b419.firebaseapp.com",
            projectId: "mmories-5b419",
            storageBucket: "mmories-5b419.firebasestorage.app",
            messagingSenderId: "180262364874",
            appId: "1:180262364874:web:104036052645786c16f633",
            measurementId: "G-HMJFTLKLX9"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();
    </script>
</head>
<body>
    <!-- Video Background -->
    <div class="background-video">
        <video autoplay muted loop id="bgVideo">
            <source src="videos/YOUR-VIDEO.mp4" type="video/mp4">
        </video>
    </div>

    <!-- Header Content -->
    <div class="header-content">
        <h1>mmories.com</h1>
        <p>Where memories are forever.</p>
    </div>

    <!-- Archives Button -->
    <div class="top-nav">
        <a href="archives.html" class="archives-button">Archives of Eternals</a>
    </div>

    <!-- Google Sign-In Button -->
    <div id="g_id_onload"
         data-client_id="231833742030-2fv4rrff04gtmrb4or2mpvld5vm93vne.apps.googleusercontent.com"
         data-context="signin"
         data-ux_mode="popup"
         data-callback="onSignIn"
         data-auto_prompt="false">
    </div>
    <div class="g_id_signin"
         data-type="standard"
         data-shape="rectangular"
         data-theme="filled_blue"
         data-text="signin_with"
         data-size="large"
         data-logo_alignment="left"
         style="margin: 20px auto; display: block;">
    </div>

    <!-- Ocean Waves Audio -->
    <audio id="bgAudio" loop>
        <source src="audio/ocean-waves.mp3" type="audio/mpeg">
    </audio>

    <!-- Audio Controls -->
    <div class="audio-controls">
        <button id="playPauseBtn">‚ñ∂Ô∏è</button>
        <button id="volumeBtn">üîä</button>
        <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
    </div>

    <!-- Founders Credits -->
    <div class="founders">
        <h2 class="founders-title">Founders:</h2>
        <p class="founder-item">The Sanctum of Legacy - <span class="shimmer-name">Hizaki420</span></p>
        <p class="founder-item">AethersOffline - <span class="shimmer-name">Sirencore</span></p>
        <p class="founder-item">Citadel of Memories - <span class="shimmer-name">Shinners13</span></p>
        <p class="founder-item">mmories.com - <span class="shimmer-name">Ozorah</span></p>
        <p class="founder-item">Aoe.Archives of Eternals - <span class="shimmer-name">Falconer</span></p>
    </div>

    <!-- Scripts -->
    <script>
        const audio = document.getElementById('bgAudio');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const volumeBtn = document.getElementById('volumeBtn');
        const volumeSlider = document.getElementById('volumeSlider');

        audio.play().catch(error => console.log('Autoplay blocked:', error));

        playPauseBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playPauseBtn.textContent = '‚è∏Ô∏è';
            } else {
                audio.pause();
                playPauseBtn.textContent = '‚ñ∂Ô∏è';
            }
        });

        volumeBtn.addEventListener('click', () => {
            volumeSlider.style.display = volumeSlider.style.display === 'none' ? 'block' : 'none';
        });

        volumeSlider.addEventListener('input', () => {
            audio.volume = volumeSlider.value;
        });
    </script>

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        function onSignIn(response) {
            const credential = response.credential;
            const decoded = parseJwt(credential);
            
            console.log("ID Token:", credential);
            console.log("Name:", decoded.name);
            console.log("Email:", decoded.email);

            localStorage.setItem("userName", decoded.name);
            localStorage.setItem("userEmail", decoded.email);

            window.location.href = "archives.html?googleUser=true";
        }

        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));

            return JSON.parse(jsonPayload);
        }
    </script>
</body>
</html>
